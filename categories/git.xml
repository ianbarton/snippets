<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>My Code Snippets (Posts about git)</title><link>http://snippets.ianbarton.net/</link><description></description><atom:link href="http://snippets.ianbarton.net/categories/git.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2017 &lt;a href="mailto:ian@manor-farm.org"&gt;Ian Barton&lt;/a&gt; </copyright><lastBuildDate>Tue, 24 Oct 2017 10:17:20 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>2017 10 21 Push Bare Git Repo To Github</title><link>http://snippets.ianbarton.net/posts/2017-10-21-push-bare-git-repo-to-github/</link><dc:creator>Ian Barton</dc:creator><description>&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;Push Bare repo to Github.&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git push --mirror github.com-ianbarton:ianbarton/cycling.git
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>git</category><category>github</category><guid>http://snippets.ianbarton.net/posts/2017-10-21-push-bare-git-repo-to-github/</guid><pubDate>Sat, 21 Oct 2017 13:55:27 GMT</pubDate></item><item><title>2017 10 21 Move Git Repo To A New Server</title><link>http://snippets.ianbarton.net/posts/2017-10-21-move-git-repo-to-a-new-server/</link><dc:creator>Ian Barton</dc:creator><description>&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;&lt;a id="ID-e57a6912-bd49-4727-986c-0cfc622e3ed0" name="ID-e57a6912-bd49-4727-986c-0cfc622e3ed0"&gt;&lt;/a&gt;Move Git Repo to a New Server.&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone –bare git@github.com:old/repo.git
&lt;span class="nb"&gt;cd&lt;/span&gt; repo
git remote add origin git@github.com:mygithubname/myrepo.git
git push –mirror
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>git</category><guid>http://snippets.ianbarton.net/posts/2017-10-21-move-git-repo-to-a-new-server/</guid><pubDate>Sat, 21 Oct 2017 13:54:12 GMT</pubDate></item><item><title>2017 10 21 Git Push All Tags And Branches</title><link>http://snippets.ianbarton.net/posts/2017-10-21-git-push-all-tags-and-branches/</link><dc:creator>Ian Barton</dc:creator><description>&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;Git Push All tags and branches.&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git config --add remote.origin.push '+refs/heads/*:refs/heads/*'
$ git config --add remote.origin.push '+refs/tags/*:refs/tags/*'
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
or directly edit .git/config file to have something like the
following:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[remote "origin"]
	url = user@example.com:/srv/git/repo.git
	fetch = +refs/heads/*:refs/remotes/origin/*
	fetch = +refs/tags/*:refs/tags/*
	push  = +refs/heads/*:refs/heads/*
	push  = +refs/tags/*:refs/tags/*
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And if you add -u once, e.g. git push –all origin -u, tracking is
setup and after that you can simply use git push.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>git</category><guid>http://snippets.ianbarton.net/posts/2017-10-21-git-push-all-tags-and-branches/</guid><pubDate>Sat, 21 Oct 2017 09:46:48 GMT</pubDate></item><item><title>2017 10 21 Splitting a Git Repo</title><link>http://snippets.ianbarton.net/posts/2017-10-21-splitting-git-repo/</link><dc:creator>Ian Barton</dc:creator><description>&lt;p&gt;
From:
&lt;a href="http://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository"&gt;http://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository&lt;/a&gt;
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Clone the repo:
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git clone --no-hardlinks foo bar; cd bar
git filter-branch --subdirectory-filter subdir/you/want
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
The –no-hardlinks option makes git use real files and not use hard
links when the repo is on a local hard disk.
&lt;/p&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Remove all references to the old history. "origin" keeps track of
your clone and "original" is where filter-branch saves the old
stuff.
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git remote rm origin
rm -r .git/refs/original/
git reflog expire --expire=now --all
&lt;/pre&gt;&lt;/div&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Shred your pack file to remove any traces of your history.
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git gc --aggressive
&lt;/pre&gt;&lt;/div&gt;

&lt;ol class="org-ol"&gt;
&lt;li&gt;Use git-prune to delete all the unused commits.
&lt;/li&gt;
&lt;/ol&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;git prune
&lt;/pre&gt;&lt;/div&gt;
&lt;div id="outline-container-sec-1" class="outline-2"&gt;
&lt;h2 id="sec-1"&gt;Git Push All tags and branches.   &lt;span class="tag"&gt;&lt;span class="git"&gt;git&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;div class="outline-text-2" id="text-1"&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ git config --add remote.origin.push '+refs/heads/*:refs/heads/*'
$ git config --add remote.origin.push '+refs/tags/*:refs/tags/*'
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
or directly edit .git/config file to have something like the
following:
&lt;/p&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[remote "origin"]
	url = user@example.com:/srv/git/repo.git
	fetch = +refs/heads/*:refs/remotes/origin/*
	fetch = +refs/tags/*:refs/tags/*
	push  = +refs/heads/*:refs/heads/*
	push  = +refs/tags/*:refs/tags/*
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;
And if you add -u once, e.g. git push –all origin -u, tracking is
setup and after that you can simply use git push.
&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;</description><category>git</category><guid>http://snippets.ianbarton.net/posts/2017-10-21-splitting-git-repo/</guid><pubDate>Sat, 21 Oct 2017 09:43:33 GMT</pubDate></item></channel></rss>